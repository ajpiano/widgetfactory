<!DOCTYPE html>
<!--
	The jQuery UI Widget Factory: WAT?
	by adam j. sontag
	updated by corey frang
	WTFPL License

	If you want the cool kid fonts for this preso:
	http://www.fontsquirrel.com/fontfacedemo/ChunkFive
	http://www.fontsquirrel.com/fontfacedemo/CartoGothic-Std

	This all refers to the Presentation slides or whatever.
	vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv

	Copyright 2010 Google Inc.

	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at

		 http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.

	Original slides: Marcin Wichary (mwichary@google.com)
	Modifications: Ernest Delgado (ernestd@google.com)
								 Alex Russell (slightlyoff@chromium.org)
								 Brad Neuberg
-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
		<title>jQuery UI Widget Factory</title>
		<link rel="shortcut icon" href="images/favicon.ico" />
		<link rel="icon" href="images/favicon.ico" type="image/x-icon" /> 
		
		<link href="css/fonts.css" rel="stylesheet" type="text/css" />
		<link href="css/main.css" rel="stylesheet" type="text/css" />
		<link href="css/syntax.css" rel="stylesheet" type="text/css" />
		<link href="css/ui-lightness/jquery-ui-1.10.0.custom.css" rel="stylesheet" type="text/css" />

	</head>
	<body>
		<div class="presentation">
			<div id="presentation-counter"></div>
			<div class="slides">
				<div class="slide" id="intro">
					<div class="bg">
						<section class="middle landing">
							<h1>The jQuery UI Widget Factory<br/><span class='subtitle'>WAT?</span></h1>
							<h4>adam j. sontag</h4>
							<h4>corey frang</h4>
						</section>
						</div>
						<div id="welcome">
							<p>
								<strong>Thanks for coming!</strong></p>
								<p><em>The jQuery UI Widget Factory</em> is an HTML5 presentation designed to familiarise developers with basic approaches to debugging
								jQuery and JavaScript code. It also introduces many of the common pitfalls most people encounter at some point on their jQuery journey.
								It is always a work in progress!
							</p>
							<p>Use the left <span class='key'>&larr;</span> and right <span class='key'>&rarr;</span> arrow keys or your mouse wheel to navigate.</p>
					</div>
				</div>
	
				<div class="slide">
			<header class="moreLegit">
			<h1 class="middleGuy">ajpiano.com/widgetfactory</h1>
			</header>
				</div>
				<div class="slide">
					<header>
						<h1>Easy Plugins Are Easy</h1>
					</header>
					<section class="text">
						<p>It's easy to extend the jQuery prototype (<code>jQuery.fn</code>) to make a <a href="http://docs.jquery.com/Plugins/Authoring">&ldquo;plugin&rdquo;</a> that operates on sets of elements.</p>
			<pre class="brush: js; toolbar: false;">
(function( $ ) {
	$.fn.redman = function() {
		return this.each( function() {
			$( this ).addClass( "wu-tang" )
				.css( "color", "red" );
		});
	};
})( jQuery );
</pre>
		</section>
				</div>

				<div class="slide">
					<header>
						<h1>State of Confusion</h1>
					</header>
					<section class="text">
						<p><a href="http://en.wikipedia.org/wiki/State_(computer_science)">Stateful</a> plugins are not as straightforward, but really useful.</p>
						<ul>
							<li>Reverse the plugin's effect?</li>
							<li>Allow plugin users to react to events triggered by the plugin?</li>
							<li>Change the plugin's effect after it has been applied?</li>
							<li><em>Remember: only one function in the <code>$.fn</code> namespace!</em></li>
							<li>Fine! But how can I even invoke "sub-methods?"</li>
						</ul>
						<p>But that <a href="http://jqueryui.com">jQuery UI</a> thing has lots of plugins that let users do all that stuff! <strong>How?</strong></p>
					</section>
				</div>
	
				<div class="slide">
					<header>
						<h1>You down with OOP?</h1>
					</header>
					<section class="text muchMuchSmallerCode">
						<p>Objects are a good way to organise code and maintain state</p>
						<pre class="brush: js; toolbar: false;">
( function( $ ) {
	function Redman( elem ) {
		this.init( elem );
	}
	Redman.prototype.init = function( elem ) {
		this.element = $( elem ).addClass( "wu-tang" ).css( "color", "red" );
	};
	Redman.prototype.destroy = function() {
		this.element.removeClass( "wu-tang" ).removeAttr( "style" ).removeData( "redman" );
	};

	$.fn.redman = function() {
		return this.each( function() {
			// Instantiate a new Redman, storing the instance in the element's data cache
			$.data( this, "redman", new Redman( this ) );
		});
	};
})( jQuery );

$( function() {
	var r = $( "#foo" ).redman().data( "redman" );
	setTimeout( function() { r.destroy(); }, 2000 );
});</pre>
					<p>Works, but is not <a href="http://benalman.com/talks/idiomatic-jquery.html#13">idiomatic</a>,
					nor does it abstract common plugin tasks</p>
					</section>
				</div>


				<div class="slide">
					<header>
						<h1>The Manufacturing Business</h1>
					</header>
					<section class="text smallerCode">
						<figure class="floaty-figure ffright ui-widget-content">
							<img src="images/introduceafactory.jpg"/>
							<figcaption>
								A factory is for making things.
							</figcaption>
						</figure>
						<p>The <a href="http://gsraj.tripod.com/design/creational/factory/factory.html">factory pattern</a> is a way to
						generate different objects with a common interface.</p>
						<p>The <strong>jQuery UI Widget Factory</strong> is simply a function (<code>$.widget</code>) that takes a string name and an object
						as arguments and creates a jQuery plugin and a "Class" to encapsulate its functionality.</p>
			<pre class="brush: js; toolbar: false;">
		$.widget( "aj.filterable" , { /* snip */ });
</pre>
<p>Powers all the jQuery UI widgets, but it can stand alone</p>
					</section>
				</div>
	
		
	
				<div class="slide">
					<header>
						<h1>SWAG</h1>
					</header>
					<section class="text muchSmallerCode">
						<p>The widget factory provides a number of plugin conveniences</p>
							<ul class="lots-of-bullets">
				<li>Creates your namespace, if necessary (<code>jQuery.aj</code>)</li>
								<li>Encapsulated class (<code>jQuery.aj.filterable.prototype</code>)</li>
								<li>Extends jQuery prototype (<code>jQuery.fn.filterable</code>)</li>
								<li>Merges defaults with user-supplied options</li>
								<li>Stores plugin instance in <code>.data()</code></li>
								<li>Methods accessible via string - <code>plugin( "foo" )</code> - or directly - <code>.foo()</code></li>
								<li>Prevents against multiple instantiation</li>
								<li>Evented structure for handling setup, teardown, option changes</li>
								<li>Easily expose callbacks: <code>._trigger( "event" )</code></li>
								<li>Sane default scoping (What is <code>this</code>?</code>)</li>
								<li>Free pseudoselector! <code>$( ":aj-filterable" )</code></li>
				<li>Inheritance! Widgets can extend from other widgets
					<pre class="brush: js; toolbar: false;">
$.widget( "aj.electricAccordion", $.ui.accordion, { /* snip */ });
</pre>
				</li>

							</ul>
		</section>
				</div>

		<div class="slide"> 
			<header> 
						<h1>Let's Rotate These Tires</h1> 
						<section> 
							<p class="quoteThing ui-widget-header">Building a simple filtering widget in almost no time flat</p> 
						</section> 
					</header> 
				</div> 


				<div class="slide">
					<header>
						<h1>How do I use this thing?</h1>
					</header>
					<section class="text muchMuchSmallerCode" style="margin-top:100px">
						<pre class="brush: js; toolbar: false;">
( function( $ ) {
	// The jQuery.aj namespace will automatically be created if it doesn't exist
	$.widget( "aj.filterable", {
		// These options will be used as defaults
		options: { className : "" },
		_create: function() {
			// The _create method is where you set up the widget
		},
		// Keep various pieces of logic in separate methods
		filter: function() {
			// Methods without an underscore are "public"
		},
		_hover: function() {
			// Methods with an underscore are "private"
		},
		_setOption: function( key, value ) {
			// Use the _setOption method to respond to changes to options
			switch( key ) {
				case "length":
					break;
			}
			// and call the parent function too!
			return this._superApply( arguments );
		}
		_destroy: function() {
			// Use the destroy method to reverse everything your plugin has applied
			return this._super();
		},
	});
})( jQuery );
</pre>
					</section>
				</div>

				<div class="slide">
					<header>
						<h1>I Can See Your Privates</h1>
					</header>
					<section class="text smallerCode">
			<p>Methods prefixed with an underscore are, <em>by convention only</em>, private.</p>
			<ul>
				<li>These methods cannot be accessed via a plugin's public API:</li>
				<li><code>$( "#foo" ).filterable( "_hover" )</code> will not work</li>
				<li>They are, however, accessible directly from the widget instance:</li>
				<li><code>$( "#foo" ).data( "aj-filterable" )._hover()</code> will
					<ul>
						<li><strong>(1.9)</strong> <code>$( "#foo" ).data( "filterable" )</code> widget name.</li>
						<li><strong>(1.10)</strong> <code>$( "#foo" ).data( "aj-filterable" )</code> namespace-widget name</li>
						<li><strong>(1.11)</strong> <code>$( "#foo" ).filterable( "instance" )</code> no more confusion</li>
					</ul>
				</li>
				<li>They are also accessible on the widget's prototype</li>
				<li><code style="font-size:90%;">$.aj.filterable.prototype._hover = function() { /* snip */ };</code>
			</ul>
			</section>
		</div>


		<div class="slide">
					<header>
						<h1>Clothing Optional</h1>
					</header>
					<section class="text smallerCode">
			<p>
				Provide an object at the <code>options</code> key to provide defaults.</br>
			</p>
			<pre class="brush: js; toolbar: false;">
// Parameters that must be initialised,
// but are optional for the plugin user
options: {
	delay: 250,
	className: ""
}
</pre>
			<p>This is akin to a familiar step from basic jQuery plugin authoring</p>
			<pre class="brush: js; toolbar: false;">
$.fn.foo = function( opts ) {
	var defaults = { bar: "baz" },
		options = $.extend( {}, defaults, opts );
};
</pre>
			</section>
		</div>


		<div class="slide">
					<header>
						<h1>In The Beginning...</h1>
					</header>
					<section class="text muchMuchSmallerCode">
			<p>
				Use the <code>_create</code> method to set up your widget. 
				It is called the first time that the plugin is invoked on an element.
			</p>
			<pre class="brush: js; toolbar: false;">
_create: function() {
	// this.element -- a jQuery object of the element the widget was invoked on.
	// this.options --  the merged options hash

	// Cache references to collections the widget needs to access regularly
	this.filterElems = this.element.children()
		.addClass( "ui-widget-content " + this.options.className );
	this.filterInput = $( "&lt;input type='text'>" )
		.insertBefore( this.element )
		.wrap( "&lt;div class='ui-widget-header " + this.options.className + "'&gt;" );

	// bind events on elements: 
	this._on( this.filterElems, {
		mouseenter: "_hover",
		mouseleave: "_hover"
	});

	// toggles ui-state-focus for you:
	this._focusable( this.filterInput );
	// _hoverable works for ui-state-hover, but we will do something slighty different in our hover
	this._on( this.filterInput, {
		"keyup": "filter"
	});
	this.timeout = false;
}</pre>
					</section>
				</div>


		<div class="slide">
					<header>
			<h1><code>_trigger( "finger" )</code></h1>
					</header>
					<section class="text muchSmallerCode">
			<p>
				The <code>_trigger</code> method fires an event the plugin user can...use.
			</p>
			<pre class="brush: js; toolbar: false;">
// Signature
this._trigger( "callbackName", [eventObject], [uiObject] )
// Example
this._trigger( "hover", e /* e.type == "mouseenter" */, { hovered: $( e.target )});
// The user can subscribe using an option during initalization
$( "#elem" ).filterable({ hover: function( event, ui ) { } });
// Or with traditional event binding/delegation
$( "#elem" ).bind( "filterablehover" , function( event, ui ) { } );
</pre>
			<dl>
			<dt><code>callbackName</code></dt>
			<dd>The name of the event you want to dispatch</dd>
			<dt><code>eventObject</code> (Optional)</dt>
			<dd>An event object (or null).  <code>_trigger</code> wraps this object and stores it in <code>event.originalEvent</code></dd>
			<dd>The user receives an object with event.type == <code>this.widgetEventPrefix + "eventname"</code></dd>
			<dt><code>uiObject</code> (Optional)</dt>
			<dd>An object containing useful properties the user may need to access.</dd>
			<dd><strong>Protip:</strong> Use a method like <code>._ui</code> to generate objects with a consistent schema.</dd>
			</dl>
					</section>
				</div>



		<div class="slide">
					<header>
						<h1>Getting Organised</h1>
					</header>
					<section class="text muchMuchSmallerCode">
			<p>Store distinct pieces of functionality as separate methods.<br/>
			If the user may need to invoke a function programmatically, expose it!</p>
			<pre class="brush: js; toolbar: false;">
filter: function( event ) {
	// Debounce the keyup event with a timeout, using the specified delay
	clearTimeout( this.timeout );
	// like setTimeout, only better!
	this.timeout = this._delay( function() {
		var re = new RegExp( this.filterInput.val(), "i" ),
			visible = this.filterElems.filter( function() {
				var $t = $( this ), matches = re.test( $t.text() );
				// Leverage the CSS Framework to handle visual state changes
				$t.toggleClass( "ui-helper-hidden", !matches );
				return matches;
			});
		// Trigger a callback so the user can respond to filtering being complete
		// Supply  an object of useful parameters with the second argument to _trigger
		this._trigger( "filtered", event, {
			visible: visible
		});
	}, this.options.delay );
},
_hover: function( event ) {
	$( event.target ).toggleClass( "ui-state-active", e.type === "mouseenter" );
	this._trigger( "hover", event, {
		hovered: $( e.target )
	});
},
</pre>
			<p></p>
					</section>
				</div>

				<div class="slide">
					<header>
						<h1>Ch-ch-ch-ch-changes</h1>
					</header>
					<section class="text muchMuchSmallerCode" style="line-height:30px;">
			<p>Plugin users can change options after a plugin has been invoked using
			<code>$("elem").filterable("option","className","newName");</code>.</p>
			<p>If modifiying a particular option requires an immediate state change, use the <code>_setOption</code>
			method to listen for the change and act on it.</p>
			<pre class="brush: js; toolbar: false; highlight:[3,4]">
_setOption: function( key, value ) {
	var oldValue = this.options[ key ];
	// Check for a particular option being set
	if ( key === "className" ) {
		// Gather all the elements we applied the className to
		this.filterInput.parent().add( this.filterElems )
		// Wwitch the new className in for the old
		.toggleClass( oldValue + " " + value );
	}
	// Call the base _setOption method
	this._superApply( argruments );

	// The widget factory doesn't fire an callback for options changes by default
	// In order to allow the user to respond, fire our own callback
	this._trigger( "setOption", null, {
		option: key,
		original: oldValue,
		current: value
	});
},
</pre>
					</section>
				</div>

		


		<div class="slide">
					<header>
						<h1>Control-Z</h1>
					</header>
					<section class="text muchSmallerCode">
			<p>
				Use the <code>destroy</code> method to revert an element back to its state from before plugin invocation. 
			</p>
			<pre class="brush: js; toolbar: false;">
_destroy: function() {
	// Remove any new elements that you created
	this.filterInput.parent().remove();

	// Remove any classes, including CSS framework classes, that you applied
	this.filterElems.removeClass( "ui-widget-content ui-helper-hidden ui-state-active " + this.options.className );

	this._super();
}
</pre>
					</section>
				</div>

		<div class="slide">
					<header>
						<h1>A Cheesy Example</h1>
					</header>
					<section class="text muchMuchSmallerCode" style="margin-top:100px">
			<pre class="brush: html; toolbar: false;">
&lt;ul id=&quot;cheeses&quot;&gt;
	&lt;li data-price=&quot;17.99&quot;&gt;Gruyere&lt;/li&gt;
	&lt;li data-price=&quot;16.99&quot;&gt;Comte&lt;/li&gt;
	&lt;li data-price=&quot;4.99&quot;&gt;Provolone&lt;/li&gt;
	&lt;li data-price=&quot;8.99&quot;&gt;Cheddar&lt;/li&gt;
	&lt;li data-price=&quot;18.99&quot;&gt;Parmigiano Reggiano&lt;/li&gt;
	&lt;li data-price=&quot;.99&quot;&gt;Government&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&quot;register&quot;&gt;
	One pound of each would cost $&lt;span id=&quot;total&quot;&gt;&lt;/span&gt;
&lt;/div&gt;
</pre>
			<div style="font-size:70%">
			<button type="button" id="activation">Toggle Filterable</button>
				<ul id="cheeses">
				<li data-price="17.99">Gruyere</li>
				<li data-price="16.99">Comte</li>
				<li data-price="4.99">Provolone</li>
				<li data-price="8.99">Cheddar</li>
				<li data-price="18.99">Parmigiano Reggiano</li>
				<li data-price=".99">Government</li>
				</ul>
				<div id="register">
				One pound of each would cost $<span id="total"></span>
				</div>
			</div>
					</section>
				</div>


		<div class="slide">
					<header>
						<h1>State + Events = Extensibility</h1>
					</header>
					<section class="text muchMuchSmallerCode">
			<p>A good widget provides a solid base with callbacks for customisation.</p>
		<pre class="brush: js; toolbar: false;">
var total = $("#total"), cheeses = $("#cheeses"), register = $("#register"), price = $("&lt;span&gt;"),
	activation = $("#activation").button({icons:{primary:"ui-icon-search"}});
activation.click(function() {
	if (cheeses.is(":aj-filterable")) {
		return cheeses.filterable("destroy");
	}
	cheeses.filterable({
		className: "cheese",
		create: function() { register.addClass("ui-widget-header cheese").show(); },
		filtered: function(e, ui) {
			var t = 0;
			ui.visible.each(function() { t = t + $(this).data("price"); });
			total.text(t.toFixed(2));
		},
		setOption: function(e, ui) {
			ui.option == "className" &amp;&amp; register.toggleClass([ui.original, ui.current].join(" "));
		},
		hover: function(e, ui) {
			if (e.originalEvent.type == "mouseenter") {
				price.text(" - " + ui.hovered.data("price") + " per lb").appendTo(ui.hovered);
			} else {
				price.detach();
			}
		}
	}).on("filterabledestroy", function(e,ui) {
		register.removeClass("ui-widget-header "+ui.options.className).hide();
	}).filterable("filter");
	setTimeout(function() { cheeses.filterable("option", "className", "cheesePlease"); },3000);
});
</pre>
					</section>
				</div>

				<div class="slide">
					<header>
						<h1>It's <code>.widget()</code> all the way down</h1>
						</header>
						<section class="text smallerCode">
						<ul>
							<li>In 1.9, a widget can "inherit" from itself</li>
							<li>This is the ideal way to extend widgets</li>
						</ul>
						<pre class="brush: js; toolbar: false;">
// An incredibly contrived example
$.widget( "ui.dialog", $.ui.dialog, {
	close: function() {
		if ( confirm( "Is it closing time?" ) ) {
			this._super();
		}
	}
});</pre>
						</section>
				</div>
				
				<div class="slide">
					<header>
						<h1>I've got a <code>bridge</code> to sell you</h1>
						</header>
						<section class="text smallerCode">
						<ul>
							<li><a href="https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js#L96"><code>$.widget.bridge</code></a> is the mechanism that actually creates the plugin</li>
							<li>Set/change which widget prototype exists on <code>jQuery.fn</code></li>
						</ul>
						<pre class="brush: js; toolbar: false;">
// Create a brand new dialog widget from scratch
$.widget( "my.awesomeDialog", {/* snip */});

// Use the bridge to assign it to jQuery.fn.dialog
$.widget.bridge( "dialog", $.my.awesomeDialog );
</pre>
						</section>
				</div>
				
				<div class="slide">
					<header>
						<h1>U and I can be friends</h1>
					</header>
						<section class="text smallerCode">
						<h2>But not roommates</h2>
						<ul>
							<li>The <code>ui</code> namespace is reserved for official jQuery UI plugins</li>
							<li>Just because you're using the widget factory doesn't mean you have to use <code>ui</code></li>
							<li>We'd kinda prefer if you didn't :)</li>
						</ul>
						</section>
				</div>

				<div class="slide">
					<header>
						<h1>More Resources</h1>
					</header>
					<section class="text">
			<ul>
				<li><a href="http://learn.jquery.com/jquery-ui/widget-factory/">Learning Center: Widget Factory</a></li>
				<li><a href="http://learn.jquery.com/jquery-ui/theming/api/">jQuery UI CSS Framework</a></li>
				<li><a href="http://www.erichynds.com/jquery/tips-for-developing-jquery-ui-widgets/">Tips for Developing UI Widgets</a></li>
				<li><a href="http://net.tutsplus.com/tutorials/javascript-ajax/coding-your-first-jquery-ui-plugin/">Coding Your First jQuery UI Plugin</a></li>
				<li><a href="http://wiki.jqueryui.com/">jQuery UI Planning Wiki</a></li>
				<li><a href="http://github.com/ajpiano.com/widgetfactory">These slides and our filterable plugin on GitHub</a></li>
			</ul>
					</section>
				</div>

		<div class="slide">
					<header>
						<h1>No problem, enjoy</h1>
					</header>
					<section class="text">
					<ul>
						<li><strong>adam j. sontag</strong></li>
						<li>ajpiano at ajpiano dot com</li>
						<li><a href="http://twitter.com/ajpiano">@ajpiano</a></li>
						<li>I'm ajpiano on freenode IRC (#jquery) and everywhere</li>
						<li><a href="http://ajpiano.com/">my blog</a></li>
						<li><a href="http://yayquery.com/">yayQuery</a></li>
					</ul>
					</section>
		</div>
		<div class="slide">
					<header>
						<h1>Revisionist History</h1>
					</header>
					<section class="text">
					<ul>
						<li><strong>corey frang</strong></li>
						<li>gnarf37 at gmail dot com</li>
						<li><a href="http://twitter.com/gnarf37">@gnarf37</a></li>
						<li>I'm gnarf on freenode IRC (#jquery) and everywhere</li>
						<li><a href="http://gnarf.net/">my blog</a></li>
					</ul>
					</section>
		</div>
	


	
			</div>

			<!-- slides -->

		</div> <!-- presentation -->

		<script>
			(function() {
				var doc = document;
				var disableBuilds = true;

				var ctr = 0;
				var spaces = /\s+/, a1 = [''];

				var toArray = function(list) {
					return Array.prototype.slice.call(list || [], 0);
				};

				var byId = function(id) {
					if (typeof id == 'string') { return doc.getElementById(id); }
					return id;
				};

				var query = function(query, root) {
					if (!query) { return []; }
					if (typeof query != 'string') { return toArray(query); }
					if (typeof root == 'string') {
						root = byId(root);
						if(!root){ return []; }
					}

					root = root || document;
					var rootIsDoc = (root.nodeType == 9);
					var doc = rootIsDoc ? root : (root.ownerDocument || document);

					// rewrite the query to be ID rooted
					if (!rootIsDoc || ('>~+'.indexOf(query.charAt(0)) >= 0)) {
						root.id = root.id || ('qUnique' + (ctr++));
						query = '#' + root.id + ' ' + query;
					}
					// don't choke on something like ".yada.yada >"
					if ('>~+'.indexOf(query.slice(-1)) >= 0) { query += ' *'; }

					return toArray(doc.querySelectorAll(query));
				};

				var strToArray = function(s) {
					if (typeof s == 'string' || s instanceof String) {
						if (s.indexOf(' ') < 0) {
							a1[0] = s;
							return a1;
						} else {
							return s.split(spaces);
						}
					}
					return s;
				};

				var addClass = function(node, classStr) {
					classStr = strToArray(classStr);
					var cls = ' ' + node.className + ' ';
					for (var i = 0, len = classStr.length, c; i < len; ++i) {
						c = classStr[i];
						if (c && cls.indexOf(' ' + c + ' ') < 0) {
							cls += c + ' ';
						}
					}
					node.className = cls.trim();
				};

				var removeClass = function(node, classStr) {
					var cls;
					if (classStr !== undefined) {
						classStr = strToArray(classStr);
						cls = ' ' + node.className + ' ';
						for (var i = 0, len = classStr.length; i < len; ++i) {
							cls = cls.replace(' ' + classStr[i] + ' ', ' ');
						}
						cls = cls.trim();
					} else {
						cls = '';
					}
					if (node.className != cls) {
						node.className = cls;
					}
				};

				var toggleClass = function(node, classStr) {
					var cls = ' ' + node.className + ' ';
					if (cls.indexOf(' ' + classStr.trim() + ' ') >= 0) {
						removeClass(node, classStr);
					} else {
						addClass(node, classStr);
					}
				};

				var ua = navigator.userAgent;
				var isFF = parseFloat(ua.split('Firefox/')[1]) || undefined;
				var isWK = parseFloat(ua.split('WebKit/')[1]) || undefined;
				var isOpera = parseFloat(ua.split('Opera/')[1]) || undefined;

				var canTransition = (function() {
					var ver = parseFloat(ua.split('Version/')[1]) || undefined;
					// test to determine if this browser can handle CSS transitions.
					var cachedCanTransition =
						(isWK || (isFF && isFF > 3.6 ) || (isOpera && ver >= 10.5));
					return function() { return cachedCanTransition; }
				})();

				//
				// Slide class
				//
				var Slide = function(node, idx) {
					this._node = node;
					if (idx >= 0) {
						this._count = idx + 1;
					}
					if (this._node) {
						addClass(this._node, 'slide distant-slide');
					}
					this._makeCounter();
					this._makeBuildList();
				};

				Slide.prototype = {
					_node: null,
					_count: 0,
					_buildList: [],
					_visited: false,
					_currentState: '',
					_states: [ 'distant-slide', 'far-past',
										 'past', 'current', 'future',
										 'far-future', 'distant-slide' ],
					setState: function(state) {
						if (typeof state != 'string') {
							state = this._states[state];
						}
						if (state == 'current' && !this._visited) {
							this._visited = true;
							this._makeBuildList();
						}
						removeClass(this._node, this._states);
						addClass(this._node, state);
						this._currentState = state;

						// delay first auto run. Really wish this were in CSS.
						/*
						this._runAutos();
						*/
						var _t = this;
						setTimeout(function(){ _t._runAutos(); } , 400);
					},
					_makeCounter: function() {
						if(!this._count || !this._node) { return; }
						var c = doc.createElement('span');
						c.innerHTML = this._count;
						c.className = 'counter';
						this._node.appendChild(c);
					},
					_makeBuildList: function() {
						this._buildList = [];
						if (disableBuilds) { return; }
						if (this._node) {
							this._buildList = query('[data-build] > *', this._node);
						}
						this._buildList.forEach(function(el) {
							addClass(el, 'to-build');
						});
					},
					_runAutos: function() {
						if (this._currentState != 'current') {
							return;
						}
						// find the next auto, slice it out of the list, and run it
						var idx = -1;
						this._buildList.some(function(n, i) {
							if (n.hasAttribute('data-auto')) {
								idx = i;
								return true;
							}
							return false;
						});
						if (idx >= 0) {
							var elem = this._buildList.splice(idx, 1)[0];
							var transitionEnd = isWK ? 'webkitTransitionEnd' : (isFF ? 'mozTransitionEnd' : 'oTransitionEnd');
							var _t = this;
							if (canTransition()) {
								var l = function(evt) {
									elem.parentNode.removeEventListener(transitionEnd, l, false);
									_t._runAutos();
								};
								elem.parentNode.addEventListener(transitionEnd, l, false);
								removeClass(elem, 'to-build');
							} else {
								setTimeout(function() {
									removeClass(elem, 'to-build');
									_t._runAutos();
								}, 400);
							}
						}
					},
					buildNext: function() {
						if (!this._buildList.length) {
							return false;
						}
						removeClass(this._buildList.shift(), 'to-build');
						return true;
					},
				};

				//
				// SlideShow class
				//
				var SlideShow = function(slides) {
					this._slides = (slides || []).map(function(el, idx) {
						return new Slide(el, idx);
					});
					var h = window.location.hash;
					try {
						this.current = parseInt(h.split('#slide')[1], 10);
					} catch (e) { /* squeltch */ }
					this.current = isNaN(this.current) ? 1 : this.current;
					var _t = this;
					doc.addEventListener('keydown',
							function(e) { _t.handleKeys(e); }, false);
					doc.addEventListener('mousewheel',
							function(e) { _t.handleWheel(e); }, false);
					doc.addEventListener('DOMMouseScroll',
							function(e) { _t.handleWheel(e); }, false);
					doc.addEventListener('touchstart',
							function(e) { _t.handleTouchStart(e); }, false);
					doc.addEventListener('touchend',
							function(e) { _t.handleTouchEnd(e); }, false);
					window.addEventListener('popstate',
							function(e) { if (e.state) { _t.go(e.state); } }, false);
					this._update();
				};

				SlideShow.prototype = {
					_slides: [],
					_update: function(dontPush) {
						document.querySelector('#presentation-counter').innerText = this.current;
						if (history.pushState) {
							if (!dontPush) {
								history.replaceState(this.current, 'Slide ' + this.current, '#slide' + this.current);
							}
						} else {
							window.location.hash = 'slide' + this.current;
						}
						for (var x = this.current-1; x < this.current + 7; x++) {
							if (this._slides[x-4]) {
								this._slides[x-4].setState(Math.max(0, x-this.current));
							}
						}
					},

					current: 0,
					next: function() {
						if (!this._slides[this.current-1].buildNext()) {
							this.current = Math.min(this.current + 1, this._slides.length);
							this._update();
						}
					},
					prev: function() {
						this.current = Math.max(this.current-1, 1);
						this._update();
					},
					go: function(num) {
						this.current = num;
						this._update(true);
					},

					_notesOn: false,
					showNotes: function() {
						var isOn = this._notesOn = !this._notesOn;
						query('.notes').forEach(function(el) {
							el.style.display = (notesOn) ? 'block' : 'none';
						});
					},
					switch3D: function() {
						toggleClass(document.body, 'three-d');
					},
					handleWheel: function(e) {
						var delta = 0;
						if (e.wheelDelta) {
							delta = e.wheelDelta/120;
							if (isOpera) {
								delta = -delta;
							}
						} else if (e.detail) {
							delta = -e.detail/3;
						}

						if (delta > 0 ) {
							this.prev();
							return;
						}
						if (delta < 0 ) {
							this.next();
							return;
						}
					},
					handleKeys: function(e) {

						if (/^(input|textarea)$/i.test(e.target.nodeName)) return;

						switch (e.keyCode) {
							case 37: // left arrow
								this.prev(); break;
							case 39: // right arrow
							case 32: // space
								this.next(); break;
							case 50: // 2
								this.showNotes(); break;
							case 51: // 3
								this.switch3D(); break;
						}
					},
					_touchStartX: 0,
					handleTouchStart: function(e) {
						this._touchStartX = e.touches[0].pageX;
					},
					handleTouchEnd: function(e) {
						var delta = this._touchStartX - e.changedTouches[0].pageX;
						var SWIPE_SIZE = 150;
						if (delta > SWIPE_SIZE) {
							this.next();
						} else if (delta< -SWIPE_SIZE) {
							this.prev();
						}
					},
				};

				// Initialize
				var slideshow = new SlideShow(query('.slide'));
			})();
		</script>

		<!--[if lt IE 9]>
		<script
			src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
		</script>
		<script>CFInstall.check({ mode: "overlay" });</script>
		<![endif]-->
<script src="js/jquery-1.9.0.js"></script>
		<script>
/*

 Syntax Highlighter: Dual licensed under the MIT and GPL licenses.

 Syntax Highlighter shBrushJScript: Dual licensed under the MIT and GPL licenses.

 Dual licensed under the MIT and GPL licenses.
*/
(function(){function j(f,e){if(!XRegExp.isRegExp(f))throw TypeError("type RegExp expected");var a=f._xregexp;f=XRegExp(f.source,m(f)+(e||""));if(a)f._xregexp={source:a.source,captureNames:a.captureNames?a.captureNames.slice(0):null};return f}function m(f){return(f.global?"g":"")+(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.extended?"x":"")+(f.sticky?"y":"")}function p(f,e,a,b){var c=y.length,d,h,g;w=true;try{for(;c--;){g=y[c];if(a&g.scope&&(!g.trigger||g.trigger.call(b))){g.pattern.lastIndex=e;if((h=
g.pattern.exec(f))&&h.index===e){d={output:g.handler.call(b,h,a),match:h};break}}}}catch(i){throw i;}finally{w=false}return d}function n(f,e,a){if(Array.prototype.indexOf)return f.indexOf(e,a);for(a=a||0;a<f.length;a++)if(f[a]===e)return a;return-1}XRegExp=function(f,e){var a=[],b=XRegExp.OUTSIDE_CLASS,c=0,d,h;if(XRegExp.isRegExp(f)){if(e!==undefined)throw TypeError("can't supply flags when constructing one RegExp from another");return j(f)}if(w)throw Error("can't call the XRegExp constructor within token definition functions");
e=e||"";for(d={hasNamedCapture:false,captureNames:[],hasFlag:function(g){return e.indexOf(g)>-1},setFlag:function(g){e+=g}};c<f.length;)if(h=p(f,c,b,d)){a.push(h.output);c+=h.match[0].length||1}else if(h=s.exec.call(B[b],f.slice(c))){a.push(h[0]);c+=h[0].length}else{h=f.charAt(c);if(h==="[")b=XRegExp.INSIDE_CLASS;else if(h==="]")b=XRegExp.OUTSIDE_CLASS;a.push(h);c++}a=RegExp(a.join(""),s.replace.call(e,t,""));a._xregexp={source:f,captureNames:d.hasNamedCapture?d.captureNames:null};return a};XRegExp.version=
"1.5.0";XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var r=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,t=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,u=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,w=false,y=[],s={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},z=s.exec.call(/()??/,"")[1]===undefined,C=function(){var f=/^/g;s.test.call(f,"");return!f.lastIndex}(),A=function(){var f=/x/g;s.replace.call("x",f,"");return!f.lastIndex}(),
D=RegExp.prototype.sticky!==undefined,B={};B[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;B[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(f,e,a,b){y.push({pattern:j(f,"g"+(D?"y":"")),handler:e,scope:a||XRegExp.OUTSIDE_CLASS,trigger:b||null})};XRegExp.cache=function(f,e){var a=f+"/"+(e||"");return XRegExp.cache[a]||
(XRegExp.cache[a]=XRegExp(f,e))};XRegExp.copyAsGlobal=function(f){return j(f,"g")};XRegExp.escape=function(f){return f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};XRegExp.execAt=function(f,e,a,b){e=j(e,"g"+(b&&D?"y":""));e.lastIndex=a=a||0;f=e.exec(f);return b?f&&f.index===a?f:null:f};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens");}};XRegExp.isRegExp=function(f){return Object.prototype.toString.call(f)==="[object RegExp]"};XRegExp.iterate=
function(f,e,a,b){for(var c=j(e,"g"),d=-1,h;h=c.exec(f);){a.call(b,h,++d,f,c);c.lastIndex===h.index&&c.lastIndex++}if(e.global)e.lastIndex=0};XRegExp.matchChain=function(f,e){return function a(b,c){var d=e[c].regex?e[c]:{regex:e[c]},h=j(d.regex,"g"),g=[],i;for(i=0;i<b.length;i++)XRegExp.iterate(b[i],h,function(l){g.push(d.backref?l[d.backref]||"":l[0])});return c===e.length-1||!g.length?g:a(g,c+1)}([f],0)};RegExp.prototype.apply=function(f,e){return this.exec(e[0])};RegExp.prototype.call=function(f,
e){return this.exec(e)};RegExp.prototype.exec=function(f){var e=s.exec.apply(this,arguments),a;if(e){if(!z&&e.length>1&&n(e,"")>-1){a=RegExp(this.source,s.replace.call(m(this),"g",""));s.replace.call(f.slice(e.index),a,function(){for(var c=1;c<arguments.length-2;c++)if(arguments[c]===undefined)e[c]=undefined})}if(this._xregexp&&this._xregexp.captureNames)for(var b=1;b<e.length;b++)if(a=this._xregexp.captureNames[b-1])e[a]=e[b];!C&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--}return e};
if(!C)RegExp.prototype.test=function(f){(f=s.exec.call(this,f))&&this.global&&!f[0].length&&this.lastIndex>f.index&&this.lastIndex--;return!!f};String.prototype.match=function(f){XRegExp.isRegExp(f)||(f=RegExp(f));if(f.global){var e=s.match.apply(this,arguments);f.lastIndex=0;return e}return f.exec(this)};String.prototype.replace=function(f,e){var a=XRegExp.isRegExp(f),b,c;if(a&&typeof e.valueOf()==="string"&&e.indexOf("${")===-1&&A)return s.replace.apply(this,arguments);if(a){if(f._xregexp)b=f._xregexp.captureNames}else f+=
"";if(typeof e==="function")c=s.replace.call(this,f,function(){if(b){arguments[0]=new String(arguments[0]);for(var d=0;d<b.length;d++)if(b[d])arguments[0][b[d]]=arguments[d+1]}if(a&&f.global)f.lastIndex=arguments[arguments.length-2]+arguments[0].length;return e.apply(null,arguments)});else c=s.replace.call(this+"",f,function(){var d=arguments;return s.replace.call(e,r,function(h,g,i){if(g)switch(g){case "$":return"$";case "&":return d[0];case "`":return d[d.length-1].slice(0,d[d.length-2]);case "'":return d[d.length-
1].slice(d[d.length-2]+d[0].length);default:i="";g=+g;if(!g)return h;for(;g>d.length-3;){i=String.prototype.slice.call(g,-1)+i;g=Math.floor(g/10)}return(g?d[g]||"":"$")+i}else{g=+i;if(g<=d.length-3)return d[g];g=b?n(b,i):-1;return g>-1?d[g+1]:h}})});if(a&&f.global)f.lastIndex=0;return c};String.prototype.split=function(f,e){if(!XRegExp.isRegExp(f))return s.split.apply(this,arguments);var a=this+"",b=[],c=0,d,h;if(e===undefined||+e<0)e=Infinity;else{e=Math.floor(+e);if(!e)return[]}for(f=XRegExp.copyAsGlobal(f);d=
f.exec(a);){if(f.lastIndex>c){b.push(a.slice(c,d.index));d.length>1&&d.index<a.length&&Array.prototype.push.apply(b,d.slice(1));h=d[0].length;c=f.lastIndex;if(b.length>=e)break}f.lastIndex===d.index&&f.lastIndex++}if(c===a.length){if(!s.test.call(f,"")||h)b.push("")}else b.push(a.slice(c));return b.length>e?b.slice(0,e):b};XRegExp.addToken(/\(\?#[^)]*\)/,function(f){return s.test.call(u,f.input.slice(f.index+f[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);
return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,function(f){this.captureNames.push(f[1]);this.hasNamedCapture=true;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(f){var e=n(this.captureNames,f[1]);return e>-1?"\\"+(e+1)+(isNaN(f.input.charAt(f.index+f[0].length))?"":"(?:)"):f[0]});XRegExp.addToken(/\[\^?]/,function(f){return f[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(f){this.setFlag(f[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(f){return s.test.call(u,
f.input.slice(f.index+f[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();
var SyntaxHighlighter=function(){function j(a,b){a.className.indexOf(b)!=-1||(a.className+=" "+b)}function m(a){return a.indexOf("highlighter_")==0?a:"highlighter_"+a}function p(a){return e.vars.highlighters[m(a)]}function n(a,b,c){if(a==null)return null;var d=c!=true?a.childNodes:[a.parentNode],h={"#":"id",".":"className"}[b.substr(0,1)]||"nodeName",g,i;g=h!="nodeName"?b.substr(1):b.toUpperCase();if((a[h]||"").indexOf(g)!=-1)return a;for(a=0;d&&a<d.length&&i==null;a++)i=n(d[a],b,c);return i}function r(a,
b){var c={},d;for(d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c}function t(a,b,c,d){function h(g){g=g||window.event;if(!g.target){g.target=g.srcElement;g.preventDefault=function(){this.returnValue=false}}c.call(d||window,g)}a.attachEvent?a.attachEvent("on"+b,h):a.addEventListener(b,h,false)}function u(a,b){var c=e.vars.discoveredBrushes,d=null;if(c==null){c={};for(var h in e.brushes){var g=e.brushes[h];d=g.aliases;if(d!=null){g.brushName=h.toLowerCase();for(g=0;g<d.length;g++)c[d[g]]=h}}e.vars.discoveredBrushes=
c}d=e.brushes[c[a]];d==null&&b!=false&&window.alert(e.config.strings.alert+(e.config.strings.noBrush+a));return d}function w(a,b){for(var c=a.split("\n"),d=0;d<c.length;d++)c[d]=b(c[d],d);return c.join("\n")}function y(a,b){if(a==null||a.length==0||a=="\n")return a;a=a.replace(/</g,"&lt;");a=a.replace(/ {2,}/g,function(c){for(var d="",h=0;h<c.length-1;h++)d+=e.config.space;return d+" "});if(b!=null)a=w(a,function(c){if(c.length==0)return"";var d="";c=c.replace(/^(&nbsp;| )+/,function(h){d=h;return""});
if(c.length==0)return d;return d+'<code class="'+b+'">'+c+"</code>"});return a}function s(a,b){a.split("\n");for(var c="",d=0;d<50;d++)c+="                    ";return a=w(a,function(h){if(h.indexOf("\t")==-1)return h;for(var g=0;(g=h.indexOf("\t"))!=-1;)h=h.substr(0,g)+c.substr(0,b-g%b)+h.substr(g+1,h.length);return h})}function z(a){return a.replace(/^\s+|\s+$/g,"")}function C(a,b){if(a.index<b.index)return-1;else if(a.index>b.index)return 1;else if(a.length<b.length)return-1;else if(a.length>b.length)return 1;
return 0}function A(a,b){function c(l){return l[0]}for(var d=null,h=[],g=b.func?b.func:c;(d=b.regex.exec(a))!=null;){var i=g(d,b);if(typeof i=="string")i=[new e.Match(i,d.index,b.css)];h=h.concat(i)}return h}function D(a){var b=/(.*)((&gt;|&lt;).*)/;return a.replace(e.regexLib.url,function(c){var d="",h=null;if(h=b.exec(c)){c=h[1];d=h[2]}return'<a href="'+c+'">'+c+"</a>"+d})}function B(){for(var a=document.getElementsByTagName("script"),b=[],c=0;c<a.length;c++)a[c].type=="syntaxhighlighter"&&b.push(a[c]);
return b}function f(a){a=a.target;var b=n(a,".syntaxhighlighter",true);a=n(a,".container",true);var c=document.createElement("textarea");if(!(!a||!b||n(a,"textarea"))){p(b.id);j(b,"source");for(var d=a.childNodes,h=[],g=0;g<d.length;g++)h.push(d[g].innerText||d[g].textContent);h=h.join("\r");c.appendChild(document.createTextNode(h));a.appendChild(c);c.focus();c.select();t(c,"blur",function(){c.parentNode.removeChild(c);b.className=b.className.replace("source","")})}}if(typeof require!="undefined"&&
typeof XRegExp=="undefined")XRegExp=require("XRegExp").XRegExp;var e={defaults:{"class-name":"","first-line":1,"pad-line-numbers":false,highlight:null,title:null,"smart-tabs":true,"tab-size":4,gutter:true,toolbar:true,"quick-code":true,collapse:false,"auto-links":true,light:false,"html-script":false},config:{space:"&nbsp;",useScriptTags:true,bloggerMode:false,stripBrs:false,tagName:"pre",strings:{expandSource:"expand source",help:"?",alert:"SyntaxHighlighter\n\n",noBrush:"Can't find brush for: ",
brushNotHtmlScript:"Brush wasn't configured for html-script option: ",aboutDialog:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>About SyntaxHighlighter</title></head><body style="font-family:Geneva,Arial,Helvetica,sans-serif;background-color:#fff;color:#000;font-size:1em;text-align:center;"><div style="text-align:center;margin-top:1.5em;"><div style="font-size:xx-large;">SyntaxHighlighter</div><div style="font-size:.75em;margin-bottom:3em;"><div>version 3.0.83 (July 02 2010)</div><div><a href="http://alexgorbatchev.com/SyntaxHighlighter" target="_blank" style="color:#005896">http://alexgorbatchev.com/SyntaxHighlighter</a></div><div>JavaScript code syntax highlighter.</div><div>Copyright 2004-2010 Alex Gorbatchev.</div></div><div>If you like this script, please <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=2930402" style="color:#005896">donate</a> to <br/>keep development active!</div></div></body></html>'}},
vars:{discoveredBrushes:null,highlighters:{}},brushes:{},regexLib:{multiLineCComments:/\/\*[\s\S]*?\*\//gm,singleLineCComments:/\/\/.*$/gm,singleLinePerlComments:/#.*$/gm,doubleQuotedString:/"([^\\"\n]|\\.)*"/g,singleQuotedString:/'([^\\'\n]|\\.)*'/g,multiLineDoubleQuotedString:new XRegExp('"([^\\\\"]|\\\\.)*"',"gs"),multiLineSingleQuotedString:new XRegExp("'([^\\\\']|\\\\.)*'","gs"),xmlComments:/(&lt;|<)!--[\s\S]*?--(&gt;|>)/gm,url:/\w+:\/\/[\w-.\/?%&=:@;]*/g,phpScriptTags:{left:/(&lt;|<)\?=?/g,
right:/\?(&gt;|>)/g},aspScriptTags:{left:/(&lt;|<)%=?/g,right:/%(&gt;|>)/g},scriptScriptTags:{left:/(&lt;|<)\s*script.*?(&gt;|>)/gi,right:/(&lt;|<)\/\s*script\s*(&gt;|>)/gi}},toolbar:{getHtml:function(a){function b(i,l){return e.toolbar.getButtonHtml(i,l,e.config.strings[l])}for(var c='<div class="toolbar">',d=e.toolbar.items,h=d.list,g=0;g<h.length;g++)c+=(d[h[g]].getHtml||b)(a,h[g]);c+="</div>";return c},getButtonHtml:function(a,b,c){return'<span><a href="#" class="toolbar_item command_'+b+" "+
b+'">'+c+"</a></span>"},handler:function(a){var b=a.target,c=b.className||"";b=p(n(b,".syntaxhighlighter",true).id);var d=function(h){return(h=(new RegExp(h+"_(\\w+)")).exec(c))?h[1]:null}("command");b&&d&&e.toolbar.items[d].execute(b);a.preventDefault()},items:{list:["expandSource","help"],expandSource:{getHtml:function(a){if(a.getParam("collapse")!=true)return"";var b=a.getParam("title");return e.toolbar.getButtonHtml(a,"expandSource",b?b:e.config.strings.expandSource)},execute:function(a){a=document.getElementById(m(a.id));
a.className=a.className.replace("collapsed","")}},help:{execute:function(){var a="scrollbars=0";a+=", left="+(screen.width-500)/2+", top="+(screen.height-250)/2+", width=500, height=250";a=a.replace(/^,/,"");a=window.open("","_blank",a);a.focus();var b=a.document;b.write(e.config.strings.aboutDialog);b.close();a.focus()}}}},findElements:function(a,b){var c;if(b)c=[b];else{c=document.getElementsByTagName(e.config.tagName);for(var d=[],h=0;h<c.length;h++)d.push(c[h]);c=d}c=c;d=[];if(e.config.useScriptTags)c=
c.concat(B());if(c.length===0)return d;for(h=0;h<c.length;h++){for(var g=c[h],i=c[h].className,l=void 0,k={},o=new XRegExp("^\\[(?<values>(.*?))\\]$"),q=new XRegExp("(?<name>[\\w-]+)\\s*:\\s*(?<value>[\\w-%#]+|\\[.*?\\]|\".*?\"|'.*?')\\s*;?","g");(l=q.exec(i))!=null;){var v=l.value.replace(/^['"]|['"]$/g,"");if(v!=null&&o.test(v)){v=o.exec(v);v=v.values.length>0?v.values.split(/\s*,\s*/):[]}k[l.name]=v}g={target:g,params:r(a,k)};g.params.brush!=null&&d.push(g)}return d},highlight:function(a,b){var c=
this.findElements(a,b),d=null,h=e.config;if(c.length!==0)for(var g=0;g<c.length;g++){b=c[g];var i=b.target,l=b.params,k=l.brush,o;if(k!=null){if(l["html-script"]=="true"||e.defaults["html-script"]==true){d=new e.HtmlScript(k);k="htmlscript"}else if(d=u(k))d=new d;else continue;o=i.innerHTML;if(h.useScriptTags){o=o;var q=z(o),v=false;if(q.indexOf("<![CDATA[")==0){q=q.substring(9);v=true}var E=q.length;if(q.indexOf("]]\>")==E-3){q=q.substring(0,E-3);v=true}o=v?q:o}if((i.title||"")!="")l.title=i.title;
l.brush=k;d.init(l);b=d.getDiv(o);if((i.id||"")!="")b.id=i.id;i.parentNode.replaceChild(b,i)}}},all:function(a){t(window,"load",function(){e.highlight(a)})}};e.all=e.all;e.highlight=e.highlight;e.Match=function(a,b,c){this.value=a;this.index=b;this.length=a.length;this.css=c;this.brushName=null};e.Match.prototype.toString=function(){return this.value};e.HtmlScript=function(a){function b(k,o){for(var q=0;q<k.length;q++)k[q].index+=o}var c=u(a),d,h=new e.brushes.Xml,g=this,i="getDiv getHtml init".split(" ");
if(c!=null){d=new c;for(var l=0;l<i.length;l++)(function(){var k=i[l];g[k]=function(){return h[k].apply(h,arguments)}})();d.htmlScript==null?window.alert(e.config.strings.alert+(e.config.strings.brushNotHtmlScript+a)):h.regexList.push({regex:d.htmlScript.code,func:function(k){for(var o=k.code,q=[],v=d.regexList,E=k.index+k.left.length,F=d.htmlScript,x,G=0;G<v.length;G++){x=A(o,v[G]);b(x,E);q=q.concat(x)}if(F.left!=null&&k.left!=null){x=A(k.left,F.left);b(x,k.index);q=q.concat(x)}if(F.right!=null&&
k.right!=null){x=A(k.right,F.right);b(x,k.index+k[0].lastIndexOf(k.right));q=q.concat(x)}for(k=0;k<q.length;k++)q[k].brushName=c.brushName;return q}})}};e.Highlighter=function(){};e.Highlighter.prototype={getParam:function(a,b){var c=this.params[a];c=c==null?b:c;var d={"true":true,"false":false}[c];return d==null?c:d},create:function(a){return document.createElement(a)},findMatches:function(a,b){var c=[];if(a!=null)for(var d=0;d<a.length;d++)if(typeof a[d]=="object")c=c.concat(A(b,a[d]));return this.removeNestedMatches(c.sort(C))},
removeNestedMatches:function(a){for(var b=0;b<a.length;b++)if(a[b]!==null)for(var c=a[b],d=c.index+c.length,h=b+1;h<a.length&&a[b]!==null;h++){var g=a[h];if(g!==null)if(g.index>d)break;else if(g.index==c.index&&g.length>c.length)a[b]=null;else if(g.index>=c.index&&g.index<d)a[h]=null}return a},figureOutLineNumbers:function(a){var b=[],c=parseInt(this.getParam("first-line"));w(a,function(d,h){b.push(h+c)});return b},isLineHighlighted:function(a){var b=this.getParam("highlight",[]);if(typeof b!="object"&&
b.push==null)b=[b];a:{a=a.toString();var c=void 0;for(c=c=Math.max(c||0,0);c<b.length;c++)if(b[c]==a){b=c;break a}b=-1}return b!=-1},getLineHtml:function(a,b,c){a=["line","number"+b,"index"+a,"alt"+(b%2==0?1:2).toString()];this.isLineHighlighted(b)&&a.push("highlighted");b==0&&a.push("break");return'<div class="'+a.join(" ")+'">'+c+"</div>"},getLineNumbersHtml:function(a,b){var c="",d=a.split("\n").length,h=parseInt(this.getParam("first-line")),g=this.getParam("pad-line-numbers");if(g==true)g=(h+
d-1).toString().length;else if(isNaN(g)==true)g=0;for(var i=0;i<d;i++){var l=b?b[i]:h+i,k;if(l==0)k=e.config.space;else{k=g;for(var o=l.toString();o.length<k;)o="0"+o;k=o}c+=this.getLineHtml(i,l,k)}return c},getCodeLinesHtml:function(a,b){a=z(a);var c=a.split("\n");this.getParam("pad-line-numbers");var d=parseInt(this.getParam("first-line"));a="";for(var h=this.getParam("brush"),g=0;g<c.length;g++){var i=c[g],l=/^(&nbsp;|\s)+/.exec(i),k=null,o=b?b[g]:d+g;if(l!=null){k=l[0].toString();i=i.substr(k.length);
k=k.replace(" ",e.config.space)}i=z(i);if(i.length==0)i=e.config.space;a+=this.getLineHtml(g,o,(k!=null?'<code class="'+h+' spaces">'+k+"</code>":"")+i)}return a},getTitleHtml:function(a){return a?"<caption>"+a+"</caption>":""},getMatchesHtml:function(a,b){function c(o){return(o=o?o.brushName||g:g)?o+" ":""}for(var d=0,h="",g=this.getParam("brush",""),i=0;i<b.length;i++){var l=b[i],k;if(!(l===null||l.length===0)){k=c(l);h+=y(a.substr(d,l.index-d),k+"plain")+y(l.value,k+l.css);d=l.index+l.length+(l.offset||
0)}}h+=y(a.substr(d),c()+"plain");return h},getHtml:function(a){var b="",c=["syntaxhighlighter"],d;if(this.getParam("light")==true)this.params.toolbar=this.params.gutter=false;className="syntaxhighlighter";this.getParam("collapse")==true&&c.push("collapsed");if((gutter=this.getParam("gutter"))==false)c.push("nogutter");c.push(this.getParam("class-name"));c.push(this.getParam("brush"));a=a.replace(/^[ ]*[\n]+|[\n]*[ ]*$/g,"").replace(/\r/g," ");b=this.getParam("tab-size");if(this.getParam("smart-tabs")==
true)a=s(a,b);else{for(var h="",g=0;g<b;g++)h+=" ";a=a.replace(/\t/g,h)}a:{b=a=a;h=/<br\s*\/?>|&lt;br\s*\/?&gt;/gi;if(e.config.bloggerMode==true)b=b.replace(h,"\n");if(e.config.stripBrs==true)b=b.replace(h,"");b=b.split("\n");h=/^\s*/;g=1E3;for(var i=0;i<b.length&&g>0;i++){var l=b[i];if(z(l).length!=0){l=h.exec(l);if(l==null){a=a;break a}g=Math.min(l[0].length,g)}}if(g>0)for(i=0;i<b.length;i++)b[i]=b[i].substr(g);a=b.join("\n")}if(gutter)d=this.figureOutLineNumbers(a);b=this.findMatches(this.regexList,
a);b=this.getMatchesHtml(a,b);b=this.getCodeLinesHtml(b,d);if(this.getParam("auto-links"))b=D(b);typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.match(/MSIE/)&&c.push("ie");return b='<div id="'+m(this.id)+'" class="'+c.join(" ")+'">'+(this.getParam("toolbar")?e.toolbar.getHtml(this):"")+'<table border="0" cellpadding="0" cellspacing="0">'+this.getTitleHtml(this.getParam("title"))+"<tbody><tr>"+(gutter?'<td class="gutter">'+this.getLineNumbersHtml(a)+"</td>":"")+'<td class="code"><div class="container">'+
b+"</div></td></tr></tbody></table></div>"},getDiv:function(a){if(a===null)a="";this.code=a;var b=this.create("div");b.innerHTML=this.getHtml(a);this.getParam("toolbar")&&t(n(b,".toolbar"),"click",e.toolbar.handler);this.getParam("quick-code")&&t(n(b,".code"),"dblclick",f);return b},init:function(a){this.id=""+Math.round(Math.random()*1E6).toString();e.vars.highlighters[m(this.id)]=this;this.params=r(e.defaults,a||{});if(this.getParam("light")==true)this.params.toolbar=this.params.gutter=false},getKeywords:function(a){a=
a.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"|");return"\\b(?:"+a+")\\b"},forHtmlScript:function(a){this.htmlScript={left:{regex:a.left,css:"script"},right:{regex:a.right,css:"script"},code:new XRegExp("(?<left>"+a.left.source+")(?<code>.*?)(?<right>"+a.right.source+")","sgi")}}};return e}();typeof exports!="undefined"&&(exports.SyntaxHighlighter=SyntaxHighlighter);
(function(){function j(){var m=SyntaxHighlighter.regexLib;this.regexList=[{regex:m.multiLineDoubleQuotedString,css:"string"},{regex:m.multiLineSingleQuotedString,css:"string"},{regex:m.singleLineCComments,css:"comments"},{regex:m.multiLineCComments,css:"comments"},{regex:/\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords("break case catch continue default delete do else false  for function if in instanceof new null return super switch this throw true try typeof var while with"),"gm"),
css:"keyword"}];this.forHtmlScript(m.scriptScriptTags)}typeof require!="undefined"&&(SyntaxHighlighter=require("shCore").SyntaxHighlighter);j.prototype=new SyntaxHighlighter.Highlighter;j.aliases=["js","jscript","javascript"];SyntaxHighlighter.brushes.JScript=j;typeof exports!="undefined"&&(exports.Brush=j)})();
(function(){function j(){this.regexList=[{regex:new XRegExp("(\\&lt;|<)\\!\\[[\\w\\s]*?\\[(.|\\s)*?\\]\\](\\&gt;|>)","gm"),css:"color2"},{regex:SyntaxHighlighter.regexLib.xmlComments,css:"comments"},{regex:new XRegExp("(&lt;|<)[\\s\\/\\?]*(\\w+)(?<attributes>.*?)[\\s\\/\\?]*(&gt;|>)","sg"),func:function(m){var p=SyntaxHighlighter.Match,n=m[0],r=(new XRegExp("(&lt;|<)[\\s\\/\\?]*(?<name>[:\\w-\\.]+)","xg")).exec(n),t=[];if(m.attributes!=null)for(var u,w=new XRegExp("(?<name> [\\w:\\-\\.]+)\\s*=\\s*(?<value> \".*?\"|'.*?'|\\w+)",
"xg");(u=w.exec(n))!=null;){t.push(new p(u.name,m.index+u.index,"color1"));t.push(new p(u.value,m.index+u.index+u[0].indexOf(u.value),"string"))}r!=null&&t.push(new p(r.name,m.index+r[0].indexOf(r.name),"keyword"));return t}}]}typeof require!="undefined"&&(SyntaxHighlighter=require("shCore").SyntaxHighlighter);j.prototype=new SyntaxHighlighter.Highlighter;j.aliases=["xml","xhtml","xslt","html"];SyntaxHighlighter.brushes.Xml=j;typeof exports!="undefined"&&(exports.Brush=j)})();
		</script>
		<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
	})();
	SyntaxHighlighter.config.clipboardSwf = 'img/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults["quick-code"] = false;
	SyntaxHighlighter.defaults['tab-size'] = 4;
	SyntaxHighlighter.all();


				/**
				* hoverIntent r5 // 2007.03.27 // jQuery 1.1.2+
				* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
				*
				* @param  f  onMouseOver function || An object with configuration options
				* @param  g  onMouseOut function  || Nothing (use configuration options object)
				* @author    Brian Cherne <brian@cherne.net>
				*/
				(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);

				jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};

</script>
<script src="js/jquery-ui-1.10.0.custom.js"></script>
<script src="jquery.aj.filterable.js"></script>
<script>

			var FTJ = {
				activeSlide:$.cookie("activeSlide"),
				init:function() {

//            !this.activeSlide && this.intro();
$(function() {
var total = $("#total"), cheeses = $("#cheeses"), register = $("#register"), price = $("<span>"),
	activation = $("#activation").button({icons:{primary:"ui-icon-search"}});
activation.click(function() {
	if (cheeses.is(":aj-filterable")) {
		return cheeses.filterable("destroy");
	}
	cheeses.filterable({
		className: "cheese",
		create: function() { register.addClass("ui-widget-header cheese").show(); },
		filtered: function(e, ui) {
			var t = 0;
			ui.visible.each(function() { t = t + $(this).data("price"); });
			total.text(t.toFixed(2));
		},
		setOption: function(e, ui) {
			ui.option == "className" && register.toggleClass([ui.original, ui.current].join(" "));
		},
		hover: function(e, ui) {
			if (e.originalEvent.type == "mouseenter") {
				price.text(" - " + ui.hovered.data("price") + " per lb").appendTo(ui.hovered);
			} else {
				price.detach();
			}
		}
	}).on("filterabledestroy", function(e,ui) {
		register.removeClass("ui-widget-header "+ui.options.className).hide();
	}).filterable("filter");
	setTimeout(function() { cheeses.filterable("option", "className", "cheesePlease"); },3000);
});

});

				},
				intro:function() {
								var welcome = $("#welcome")
								.dialog({
									title:"First Time?",
									modal:true,
									width:"67%",
									buttons:{
										"Cool, Let's Get Started!":function() {
											$.cookie("activeSlide",1);
											welcome.dialog("close");
										}
									}
								});
				}
			};

			$(document).ready(function() {
					FTJ.init();
			});

</script>
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-19721657-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

</script>

	</body>
</html>
